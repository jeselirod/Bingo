import{Fa as J,Ga as K,H as Y,Ha as Z,Ia as tt,Ja as et,Ka as k,L as w,La as o,Ma as r,Na as v,Oa as R,Pa as f,Q as S,Qa as _,R as C,Ra as it,S as G,Sa as nt,T as X,Ta as st,Ua as h,Va as ot,Wa as B,Ya as rt,_ as u,ab as M,cb as at,la as c,lb as ht,mb as lt,ua as m}from"./chunk-FDYIIUEA.js";import{a as H,b as Q}from"./chunk-2NFLSA4Y.js";var E=class n{number=at(null);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-bola"]],inputs:{number:[1,"number"]},decls:5,vars:1,consts:[[1,"sphere-container"],[1,"sphere"],[1,"sphere-face"],[1,"number"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),h(4),r()()()()),e&2&&(c(4),ot(i.number()!==null?i.number():"?"))},styles:['[_nghost-%COMP%]{display:block;perspective:800px}.sphere-container[_ngcontent-%COMP%]{width:128px;height:128px;position:relative;transform-style:preserve-3d}.sphere[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform-style:preserve-3d;transform:rotateX(15deg) rotateY(0);transition:transform .5s ease-out}.sphere-face[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,#e0e0e0 40%,#b0b0b0 70%,gray);display:flex;align-items:center;justify-content:center;font-size:3rem;font-weight:700;color:#4f46e5;box-shadow:inset 4px 4px 12px #0003,inset -4px -4px 12px #fff9,0 4px 8px #0000004d;overflow:hidden}.sphere-face[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;background:radial-gradient(circle at center,transparent 60%,rgba(0,0,0,.2) 100%);pointer-events:none}.number[_ngcontent-%COMP%]{position:relative;z-index:1}.sphere-face[_ngcontent-%COMP%]:after{content:"";position:absolute;top:20%;left:50%;width:30%;height:30%;background:radial-gradient(circle at center,rgba(255,255,255,.9),transparent 70%);border-radius:50%;transform:translate(-50%,-50%);pointer-events:none}']})};var g=class n{numbersBingo=90;remainingBallsSignal=u(Array.from({length:this.numbersBingo},(t,e)=>e+1));remainingBalls=this.remainingBallsSignal.asReadonly();currentBallSignal=u(null);currentBall=this.currentBallSignal.asReadonly();drawnNumberSignal=u([]);drawnNumber=this.drawnNumberSignal.asReadonly();displayBallSignal=u(null);displayBall=this.displayBallSignal.asReadonly();isAnimatingSignal=u(!1);isAnimating=this.isAnimatingSignal.asReadonly();animationIntervalId=null;animationDuration=1e3;intervalStep=50;constructor(){}resetBalls(){this.remainingBallsSignal.set(Array.from({length:this.numbersBingo},(t,e)=>e+1)),this.drawnNumberSignal.set([]),this.currentBallSignal.set(null),this.displayBallSignal.set(null)}nextBall(){if(this.isAnimatingSignal())return;let t=this.remainingBallsSignal();if(t.length===0){alert("\xA1Se han acabado las bolas!");return}this.isAnimatingSignal.set(!0);let e=Math.floor(Math.random()*t.length),i=t[e],s=Date.now();this.animationIntervalId=setInterval(()=>{if(Date.now()-s>=this.animationDuration)clearInterval(this.animationIntervalId),this.displayBallSignal.set(i),this.currentBallSignal.set(i),this.remainingBallsSignal.update(a=>a.filter(d=>d!==i)),this.drawnNumberSignal.update(a=>[...a,i]),this.isAnimatingSignal.set(!1);else{let a=Math.floor(Math.random()*this.remainingBalls().length);this.displayBallSignal.set(this.remainingBalls()[a])}},this.intervalStep)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})};var T=class n{bingoService=w(g);remainingCount=M(()=>this.bingoService.remainingBalls().length);constructor(){}ngOnInit(){this.bingoService.resetBalls()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-bombo"]],decls:6,vars:3,consts:[[1,"relative","overflow-hidden","flex","flex-col","items-center","justify-center","space-y-6","p-6","bg-gradient-to-r","from-indigo-500","via-purple-600","to-pink-500","rounded-lg","shadow-lg","max-w-xs","mx-auto"],[3,"number"],[1,"px-6","py-3","bg-indigo-700","text-white","rounded-lg","hover:bg-indigo-800","transition","disabled:opacity-50",3,"click","disabled"],[1,"text-white","font-semibold"]],template:function(e,i){e&1&&(o(0,"div",0),v(1,"app-bola",1),o(2,"button",2),f("click",function(){return i.bingoService.nextBall()}),h(3," Siguiente bola "),r(),o(4,"p",3),h(5),r()()),e&2&&(c(),k("number",i.bingoService.displayBall()),c(),k("disabled",i.remainingCount()===0),c(3),B(" Bolas restantes: ",i.remainingCount()," "))},dependencies:[E],styles:[".circle[_ngcontent-%COMP%]{transform-origin:center bottom}@keyframes _ngcontent-%COMP%_bounce-restricted{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.animate-bounce-restricted[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-restricted .6s ease-in-out infinite}"]})};var gt=(n,t,e)=>({"bg-green-500 text-white":n,"bg-red-600 text-white":t,"bg-gray-200 text-gray-700":e});function ft(n,t){if(n&1&&(o(0,"div",2),h(1),r()),n&2){let e=t.$implicit,i=_();k("ngClass",rt(2,gt,i.drawnNumber().includes(e),i.drawnNumber().includes(e)&&i.drawnNumber()[i.drawnNumber().length-1]===e,!i.drawnNumber().includes(e))),c(),B(" ",e," ")}}var P=class n{bingoService=w(g);allNumbers=Array.from({length:this.bingoService.numbersBingo},(t,e)=>e+1);drawnNumber=M(()=>this.bingoService.drawnNumber());static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-tablero"]],decls:4,vars:0,consts:[[1,"tablero-container","w-full","max-w-screen-xl","mx-auto","mt-3","p-4","flex","justify-center"],[1,"grid","grid-cols-8","sm:grid-cols-8","md:grid-cols-12","lg:grid-cols-12","xl:grid-cols-15","gap-2","sm:gap-3","md:gap-4","bg-gray-800","p-4","rounded-lg","shadow-inner","w-full","max-w-7xl"],[1,"flex","items-center","justify-center","rounded-full","transition","w-8","h-8","text-xs","sm:w-9","sm:h-9","sm:text-sm","md:w-10","md:h-10","md:text-base","lg:w-12","lg:h-12","lg:text-lg","xl:w-18","xl:h-18","xl:text-2xl","font-semibold",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),tt(2,ft,2,6,"div",2,Z),r()()),e&2&&(c(2),et(i.allNumbers))},dependencies:[lt,ht],styles:["@media (min-width: 768px){.grid[_ngcontent-%COMP%]   .grid-cols-10[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10vw;height:10vw}}.grid[_ngcontent-%COMP%]{box-shadow:inset 0 0 10px #00000080}"]})};function N(n){return Math.abs(Math.floor(n))}function x(n,t){return Math.random()*(t-n)+n}function p(n,t){return Math.floor(x(n,t+1))}function ct(n,t,e,i){let s=Math.pow;return Math.sqrt(s(n-e,2)+s(t-i,2))}function j(n,t,e=1){if(n>360||n<0)throw new Error(`Expected hue 0-360 range, got \`${n}\``);if(t>100||t<0)throw new Error(`Expected lightness 0-100 range, got \`${t}\``);if(e>1||e<0)throw new Error(`Expected alpha 0-1 range, got \`${e}\``);return`hsla(${n}, 100%, ${t}%, ${e})`}var dt=n=>{if(typeof n=="object"&&n!==null){if(typeof Object.getPrototypeOf=="function"){let t=Object.getPrototypeOf(n);return t===Object.prototype||t===null}return Object.prototype.toString.call(n)==="[object Object]"}return!1},xt=["__proto__","constructor","prototype"],pt=(...n)=>n.reduce((t,e)=>(Object.keys(e).forEach(i=>{xt.includes(i)||(Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=e[i]:dt(t[i])&&dt(e[i])?t[i]=pt(t[i],e[i]):t[i]=e[i])}),t),{});function bt(n,t){let e;return(...i)=>{e&&clearTimeout(e),e=setTimeout(()=>n(...i),t)}}var L=class{x;y;ctx;hue;friction;gravity;flickering;lineWidth;explosionLength;angle;speed;brightness;coordinates=[];decay;alpha=1;constructor({x:t,y:e,ctx:i,hue:s,decay:l,gravity:a,friction:d,brightness:b,flickering:y,lineWidth:A,explosionLength:D}){for(this.x=t,this.y=e,this.ctx=i,this.hue=s,this.gravity=a,this.friction=d,this.flickering=y,this.lineWidth=A,this.explosionLength=D,this.angle=x(0,Math.PI*2),this.speed=p(1,10),this.brightness=p(b.min,b.max),this.decay=x(l.min,l.max);this.explosionLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&t()}draw(){let t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=j(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=j(this.hue,this.flickering?x(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}},F=class{constructor(t,e){this.options=t,this.canvas=e,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}active=!1;x;y;get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(t,e){let{click:i,move:s}=this.mouseOptions;(i||s)&&(this.x=t.pageX-this.canvas.offsetLeft,this.y=t.pageY-this.canvas.offsetTop,this.active=e)}pointerDown(t){this.usePointer(t,this.mouseOptions.click)}pointerUp(t){this.usePointer(t,!1)}pointerMove(t){this.usePointer(t,this.active)}},W=class{hue;rocketsPoint;opacity;acceleration;friction;gravity;particles;explosion;mouse;boundaries;sound;delay;brightness;decay;flickering;intensity;traceLength;traceSpeed;lineWidth;lineStyle;autoresize;constructor(){this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={debug:!1,height:0,width:0,x:50,y:50}}update(t){Object.assign(this,pt(this,t))}},V=class{constructor(t,e){this.options=t,this.render=e}tick=0;rafId=0;fps=60;tolerance=.1;now;mount(){this.now=performance.now();let t=1e3/this.fps,e=i=>{this.rafId=requestAnimationFrame(e);let s=i-this.now;s>=t-this.tolerance&&(this.render(),this.now=i-s%t,this.tick+=s*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(e)}unmount(){cancelAnimationFrame(this.rafId)}},$=class{constructor(t,e,i){this.options=t,this.updateSize=e,this.container=i}resizer;mount(){if(!this.resizer){let t=bt(()=>this.updateSize(),100);this.resizer=new ResizeObserver(t)}this.options.autoresize&&this.resizer.observe(this.container)}unmount(){this.resizer&&this.resizer.unobserve(this.container)}},q=class{constructor(t){this.options=t,this.init()}buffers=[];audioContext;onInit=!1;get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(let t of this.soundOptions.files){let e=await(await fetch(t)).arrayBuffer();this.audioContext.decodeAudioData(e).then(i=>{this.buffers.push(i)}).catch(i=>{throw i})}}play(){if(this.isEnabled&&this.buffers.length){let t=this.audioContext.createBufferSource(),e=this.buffers[p(0,this.buffers.length-1)],i=this.audioContext.createGain();t.buffer=e,i.gain.value=x(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),i.connect(this.audioContext.destination),t.connect(i),t.start(0)}else this.init()}},U=class{x;y;sx;sy;dx;dy;ctx;hue;speed;acceleration;traceLength;totalDistance;angle;brightness;coordinates=[];currentDistance=0;constructor({x:t,y:e,dx:i,dy:s,ctx:l,hue:a,speed:d,traceLength:b,acceleration:y}){for(this.x=t,this.y=e,this.sx=t,this.sy=e,this.dx=i,this.dy=s,this.ctx=l,this.hue=a,this.speed=d,this.traceLength=b,this.acceleration=y,this.totalDistance=ct(t,e,i,s),this.angle=Math.atan2(s-e,i-t),this.brightness=p(50,70);this.traceLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;let e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;this.currentDistance=ct(this.sx,this.sy,this.x+e,this.y+i),this.currentDistance>=this.totalDistance?t(this.dx,this.dy,this.hue):(this.x+=e,this.y+=i)}draw(){let t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=j(this.hue,this.brightness),this.ctx.stroke()}},I=class{target;container;canvas;ctx;width;height;traces=[];explosions=[];waitStopRaf;running=!1;opts;sound;resize;mouse;raf;constructor(t,e={}){this.target=t,this.container=t,this.opts=new W,this.createCanvas(this.target),this.updateOptions(e),this.sound=new q(this.opts),this.resize=new $(this.opts,this.updateSize.bind(this),this.container),this.mouse=new F(this.opts,this.canvas),this.raf=new V(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.8"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(t=!1){this.running&&(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),t&&this.canvas.remove())}async waitStop(t){if(this.running)return new Promise(e=>{this.waitStopRaf=()=>{this.waitStopRaf&&(requestAnimationFrame(this.waitStopRaf),!this.traces.length&&!this.explosions.length&&(this.waitStopRaf=null,this.stop(t),e()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){this.ctx&&(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(t=1){for(let e=0;e<t;e++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(t){this.opts.update(t)}updateSize({width:t=this.container.clientWidth,height:e=this.container.clientHeight}={}){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.updateBoundaries(Q(H({},this.opts.boundaries),{width:t,height:e}))}updateBoundaries(t){this.updateOptions({boundaries:t})}createCanvas(t){t instanceof HTMLCanvasElement?(t.isConnected||document.body.append(t),this.canvas=t):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;let{opacity:t,lineStyle:e,lineWidth:i}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${t})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=e,this.ctx.lineJoin="round",this.ctx.lineWidth=x(i.trace.min,i.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){let{hue:t,rocketsPoint:e,boundaries:i,traceLength:s,traceSpeed:l,acceleration:a,mouse:d}=this.opts;this.traces.push(new U({x:this.width*p(e.min,e.max)/100,y:this.height,dx:this.mouse.x&&d.move||this.mouse.active?this.mouse.x:p(i.x,i.width-i.x*2),dy:this.mouse.y&&d.move||this.mouse.active?this.mouse.y:p(i.y,i.height*.5),ctx:this.ctx,hue:p(t.min,t.max),speed:l,acceleration:a,traceLength:N(s)}))}initTrace(){if(this.waitStopRaf)return;let{delay:t,mouse:e}=this.opts;(this.raf.tick>p(t.min,t.max)||this.mouse.active&&e.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let t=this.traces.length;for(;t--;)this.traces[t].draw(),this.traces[t].update((e,i,s)=>{this.initExplosion(e,i,s),this.sound.play(),this.traces.splice(t,1)})}initExplosion(t,e,i){let{particles:s,flickering:l,lineWidth:a,explosion:d,brightness:b,friction:y,gravity:A,decay:D}=this.opts,mt=N(s);for(;mt--;)this.explosions.push(new L({x:t,y:e,ctx:this.ctx,hue:i,friction:y,gravity:A,flickering:p(0,100)<=l,lineWidth:x(a.explosion.min,a.explosion.max),explosionLength:N(d),brightness:b,decay:D}))}drawExplosion(){let t=this.explosions.length;for(;t--;)this.explosions[t].draw(),this.explosions[t].update(()=>{this.explosions.splice(t,1)})}};var wt=["fireworksContainer"];function vt(n,t){if(n&1){let e=R();o(0,"div",7)(1,"div",8)(2,"h2",9),h(3,"\xBFEst\xE1s seguro de que quieres resetear el bingo?"),r(),o(4,"div",10)(5,"button",11),f("click",function(){S(e);let s=_();return C(s.confirmReset())}),h(6," S\xED, resetear "),r(),o(7,"button",12),f("click",function(){S(e);let s=_();return C(s.showResetModal.set(!1))}),h(8," Cancelar "),r()()()()}}var ut=class n{bingoService=w(g);showResetModal=u(!1);fireworksContainer;fireworks=null;audio=new Audio("/Bingo/sounds/Fireworks-burst-sound.mp3");confirmReset(){this.bingoService.resetBalls(),this.showResetModal.set(!1)}showFireworks(){this.fireworks||(this.fireworks=new I(this.fireworksContainer.nativeElement,{rocketsPoint:{min:50,max:50},acceleration:1.5,friction:.95,gravity:1.5,particles:1e3,explosion:20,boundaries:{width:window.innerWidth}})),this.fireworks.start(),this.audio.currentTime=0,this.audio.play(),setTimeout(()=>{this.fireworks?.stop(),this.audio.pause()},7e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-admin-bingo"]],viewQuery:function(e,i){if(e&1&&it(wt,7),e&2){let s;nt(s=st())&&(i.fireworksContainer=s.first)}},decls:12,vars:1,consts:[["fireworksContainer",""],[1,"fixed","top-0","left-0","w-full","h-full","pointer-events-none","z-50"],[1,"flex","justify-between","px-4","py-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-red-600","text-white","font-semibold","rounded-md","shadow","hover:bg-red-700","transition","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v6h6M20 20v-6h-6M4 20l16-16"],[1,"bg-yellow-500","hover:bg-yellow-600","text-white","font-bold","py-2","px-6","rounded","shadow-lg","transition","duration-300",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/20","backdrop-blur-sm"],[1,"bg-white","p-6","rounded-lg","shadow-lg","max-w-sm","w-full","text-center"],[1,"text-lg","font-bold","mb-4","text-gray-800"],[1,"flex","justify-center","gap-4"],[1,"px-4","py-2","bg-red-600","text-white","rounded","hover:bg-red-700","transition",3,"click"],[1,"px-4","py-2","bg-gray-300","text-gray-800","rounded","hover:bg-gray-400","transition",3,"click"]],template:function(e,i){if(e&1){let s=R();v(0,"div",1,0),o(2,"div",2)(3,"button",3),f("click",function(){return S(s),C(i.showResetModal.set(!0))}),G(),o(4,"svg",4),v(5,"path",5),r(),h(6," Resetear Bingo "),r(),X(),o(7,"button",6),f("click",function(){return S(s),C(i.showFireworks())}),h(8,` Bingo
`),r()(),J(9,vt,9,0,"div",7),v(10,"app-bombo")(11,"app-tablero")}e&2&&(c(9),K(i.showResetModal()?9:-1))},dependencies:[T,P],styles:["[_nghost-%COMP%]     canvas{width:100%!important;height:100%!important;position:fixed!important;top:0!important;left:0!important;pointer-events:none!important;z-index:50!important}"]})};export{ut as AdminBingo};
