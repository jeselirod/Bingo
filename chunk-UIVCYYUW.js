import{a as D,c as B,g as G,l as N}from"./chunk-BTIFQC47.js";import{$a as F,Da as A,Ea as P,P as a,Pa as I,Qa as L,Sa as W,Ub as h,V as g,Vb as b,Z as S,ab as T,ca as E,da as M,ea as C,ia as u,ja as r,ka as t,la as p,na as d,oa as _,sa as o,ua as x,va as v,wa as y,xa as w,y as c,za as k}from"./chunk-3YNPOX7C.js";function U(i,e){if(i&1&&(r(0,"div",12),o(1),t()),i&2){let s=_();a(),x(" ",s.errorMessage," ")}}var f=class i{authService=c(h);alertService=c(b);router=c(F);email="";password="";errorMessage=null;constructor(){}async loginWithGoogle(){this.errorMessage=null;try{await this.authService.loginWithGoogle()}catch(e){console.error("Error en el componente al iniciar sesi\xF3n con Google:",e),this.errorMessage=`Error al iniciar sesi\xF3n con Google: ${e.message}`,this.alertService.show(this.errorMessage,"error",4e3)}}async signUpWithEmail(){if(this.errorMessage=null,!this.email||!this.password){this.errorMessage="Por favor, ingresa correo electr\xF3nico y contrase\xF1a para registrarte.";return}try{await this.authService.signUpWithEmailAndPassword(this.email,this.password)}catch(e){switch(console.error("Error en el componente al registrarse con Email/Password:",e),e.code){case"auth/email-already-in-use":this.errorMessage="El correo electr\xF3nico ya est\xE1 registrado.";break;case"auth/invalid-email":this.errorMessage="El formato del correo electr\xF3nico es inv\xE1lido.";break;case"auth/weak-password":this.errorMessage="La contrase\xF1a es demasiado d\xE9bil. Debe tener al menos 6 caracteres.";break;default:this.errorMessage=`Error al registrarse: ${e.message}`}this.alertService.show(this.errorMessage,"error",4e3)}}async signInWithEmail(){if(this.errorMessage=null,!this.email||!this.password){this.errorMessage="Por favor, ingresa correo electr\xF3nico y contrase\xF1a para iniciar sesi\xF3n.";return}try{await this.authService.signInWithEmailAndPassword(this.email,this.password),console.log("Inicio de sesi\xF3n con Email/Password completado (esperando redirecci\xF3n por suscripci\xF3n)")}catch(e){switch(console.error("Error en el componente al iniciar sesi\xF3n con Email/Password:",e),e.code){case"auth/invalid-credential":this.errorMessage="Correo electr\xF3nico o contrase\xF1a incorrectos.";break;case"auth/user-disabled":this.errorMessage="Este usuario ha sido deshabilitado.";break;case"auth/user-not-found":this.errorMessage="Usuario no encontrado.";break;case"auth/invalid-email":this.errorMessage="El formato del correo electr\xF3nico es inv\xE1lido.";break;default:this.errorMessage=`Error al iniciar sesi\xF3n: ${e.message}`}this.alertService.show(this.errorMessage,"error",4e3)}}async signInAnonymously(){this.errorMessage=null;try{await this.authService.signInAnonymously(),console.log("Inicio de sesi\xF3n an\xF3nimo completado (esperando redirecci\xF3n por suscripci\xF3n)")}catch(e){console.error("Error en el componente al iniciar sesi\xF3n an\xF3nimo:",e),this.errorMessage=`Error al iniciar sesi\xF3n como invitado: ${e.message}`,this.alertService.show(this.errorMessage,"error",4e3)}}async logout(){this.errorMessage=null;try{await this.authService.logout(),console.log("Cierre de sesi\xF3n completado.")}catch(e){console.error("Error en el componente al cerrar sesi\xF3n:",e),this.errorMessage=`Error al cerrar sesi\xF3n: ${e.message}`,this.alertService.show(this.errorMessage,"error",4e3)}}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=g({type:i,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"text-2xl","font-bold","mb-4","text-center","text-black"],[1,"text-center","mb-6","text-gray-600"],[1,"mb-6","border-t","border-black","pt-6"],[1,"text-lg","font-semibold","mb-3","text-black"],["type","email","placeholder","Correo electr\xF3nico",1,"w-full","p-2","mb-3","border-2","border-black","text-black","rounded","focus:ring","focus:border-blue-300",3,"ngModelChange","ngModel"],["type","password","placeholder","Contrase\xF1a",1,"w-full","p-2","mb-4","border-2","border-black","text-black","rounded","focus:ring","focus:border-blue-300",3,"ngModelChange","ngModel"],[1,"w-full","bg-blue-500","text-white","p-2","rounded","hover:bg-blue-600","transition-colors","mb-2",3,"click"],[1,"w-full","bg-green-500","text-white","p-2","rounded","hover:bg-green-600","transition-colors",3,"click"],[1,"w-full","flex","items-center","justify-center","bg-white","text-gray-800","p-2","rounded","border","border-gray-300","hover:bg-gray-100","transition-colors","mb-2",3,"click"],["src","https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","alt","Google logo",1,"w-5","h-5","mr-2"],[1,"w-full","bg-gray-500","text-white","p-2","rounded","hover:bg-gray-600","transition-colors",3,"click"],["class","mt-4 p-3 bg-red-100 text-red-700 border border-red-400 rounded",4,"ngIf"],[1,"mt-4","p-3","bg-red-100","text-red-700","border","border-red-400","rounded"]],template:function(s,n){s&1&&(r(0,"h2",0),o(1,"Autenticaci\xF3n de BingoApp"),t(),r(2,"p",1),o(3,"Elige c\xF3mo quieres entrar:"),t(),r(4,"div",2)(5,"h3",3),o(6,"Con Correo y Contrase\xF1a:"),t(),r(7,"input",4),w("ngModelChange",function(l){return y(n.email,l)||(n.email=l),l}),t(),r(8,"input",5),w("ngModelChange",function(l){return y(n.password,l)||(n.password=l),l}),t(),r(9,"button",6),d("click",function(){return n.signInWithEmail()}),o(10," Iniciar Sesi\xF3n "),t(),r(11,"button",7),d("click",function(){return n.signUpWithEmail()}),o(12," Registrarse "),t()(),r(13,"div",2)(14,"h3",3),o(15,"Otras opciones:"),t(),r(16,"button",8),d("click",function(){return n.loginWithGoogle()}),p(17,"img",9),o(18," Iniciar Sesi\xF3n con Google "),t(),r(19,"button",10),d("click",function(){return n.signInAnonymously()}),o(20," Entrar como Invitado (An\xF3nimo) "),t()(),S(21,U,2,1,"div",11)),s&2&&(a(7),v("ngModel",n.email),a(),v("ngModel",n.password),a(13),u("ngIf",n.errorMessage))},dependencies:[W,I,N,D,B,G],encapsulation:2})};var $=()=>["/lobby"];function J(i,e){i&1&&(r(0,"h1",3),o(1,"\xA1Cumple J\xB2!"),t(),r(2,"p",4),o(3,"Bienvenidos al Bingo del Cumple J\xB2 \u{1F389}"),t(),r(4,"button",5),o(5," Empezar "),t()),i&2&&(a(4),u("routerLink",k(1,$)))}function q(i,e){i&1&&(r(0,"div",2),p(1,"app-login"),t())}var H=class i{authService=c(h);alertService=c(b);async logout(){try{await this.authService.logout(),console.log("Cierre de sesi\xF3n completado.")}catch(e){console.error("Error en el componente al cerrar sesi\xF3n:",e),this.alertService.show(`Error al cerrar sesi\xF3n: ${e.message}`,"error",4e3)}}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=g({type:i,selectors:[["app-home"]],decls:5,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-purple-600","to-pink-500","text-white"],[1,"text-center","space-y-4"],[1,"bg-white","bg-opacity-10","backdrop-blur-md","p-10","rounded-2xl","shadow-lg","w-full","max-w-md","relative"],[1,"text-4xl","font-bold"],[1,"text-lg"],[1,"mt-4","px-6","py-2","bg-white","text-purple-600","font-semibold","rounded-full","hover:bg-gray-100","transition",3,"routerLink"]],template:function(s,n){s&1&&(r(0,"div",0)(1,"div",1),E(2,J,6,2),A(3,"async"),M(4,q,2,0,"div",2),t()()),s&2&&(a(2),C(P(3,1,n.authService.user$)?2:4))},dependencies:[T,L,f],encapsulation:2})};export{H as Home};
