import{a as L,b as g,c as j,d as A,e as R,f as G,h as M,i as $,j as q,k as P,l as N,m as D}from"./chunk-GC3HGDHM.js";import{c as U}from"./chunk-RONIJWXM.js";import{Ka as E,L as l,Oa as T,Qb as I,R as S,Rb as V,Xa as k,_ as p,aa as f,ea as d,fa as i,ga as n,ha as b,ia as _,ja as s,ka as m,oa as a,qa as y,u,w as v,wa as C,x as h,y as w,z as F}from"./chunk-QBB2YFUH.js";import"./chunk-7CGTOI24.js";var x=class r{static idRoomPattern="^(?!.{1,2}$)[^/\0-\x7F]{1,50}$";static getTextError(e){for(let t of Object.keys(e))switch(t){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${e.minlength.requiredLength} caracteres.`;case"maxlength":return`M\xE1ximo de ${e.maxlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${e.min.min}`;case"max":return`Valor maximo de ${e.max.max}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"customEmail":return"El valor ingresado no es un correo electr\xF3nico v\xE1lido";case"passwordStrength":return"La contrase\xF1a debe tener al menos 8 caracteres, incluir may\xFAscula, min\xFAscula, n\xFAmero y s\xEDmbolo.";case"pattern":return e.pattern.requiredPattern===r.idRoomPattern?"El formato del id no es valido":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${t}`}return null}static isValidField(e,t){return!!e.controls[t].errors&&e.controls[t].touched}static getFieldError(e,t){if(!e.controls[t])return null;let o=e.controls[t].errors??{};return r.getTextError(o)}static isValidFieldInArray(e,t){return e.controls[t].errors&&e.controls[t].touched}static getFieldErrorInArray(e,t){if(e.controls.length===0)return null;let o=e.controls[t].errors??{};return r.getTextError(o)}};var B=(r,e)=>({"bg-purple-500 text-white":r,"bg-white text-purple-600":e});function z(r,e){if(r&1&&(i(0,"div",12)(1,"div"),a(2),n()()),r&2){let t=m(2);l(2),y(" ",t.formUtils.getFieldError(t.form,"roomId")," ")}}function O(r,e){if(r&1){let t=_();i(0,"form",10),s("ngSubmit",function(){v(t);let c=m();return h(c.createRoom())}),b(1,"input",11),p(2,z,3,1,"div",12),i(3,"button",13),a(4," Crear Partida "),n()()}if(r&2){let t=m();d("formGroup",t.form),l(2),f(t.formUtils.isValidField(t.form,"roomId")?2:-1)}}function J(r,e){if(r&1&&(i(0,"div",12)(1,"div"),a(2),n()()),r&2){let t=m(2);l(2),y(" ",t.formUtils.getFieldError(t.form,"roomId")," ")}}function K(r,e){if(r&1){let t=_();i(0,"form",10),s("ngSubmit",function(){v(t);let c=m();return h(c.joinRoom())}),b(1,"input",14),p(2,J,3,1,"div",12),i(3,"button",13),a(4," Entrar a Partida "),n()()}if(r&2){let t=m();d("formGroup",t.form),l(2),f(t.formUtils.isValidField(t.form,"roomId")?2:-1)}}var H=class r{formUtils=x;authService=u(I);alertService=u(V);bingoService=u(U);router=u(k);activeTab="create";form=new R({roomId:new G("",[g.required,g.maxLength(50),g.pattern(this.formUtils.idRoomPattern)])});async createRoom(){this.checkForm();let e=this.form.get("roomId")?.value.trim();e&&(this.bingoService.createRoom(e),this.router.navigate([`/bingo/admin/${e}`]))}joinRoom(){this.checkForm();let e=this.form.get("roomId")?.value.trim();e&&this.router.navigate([`/bingo/invitado/${e}`])}checkForm(){if(this.form.invalid){this.form.markAllAsTouched();return}}async logout(){try{await this.authService.logout(),console.log("Cierre de sesi\xF3n completado."),this.router.navigate(["/home"])}catch(e){console.error("Error en el componente al cerrar sesi\xF3n:",e),this.alertService.show(`Error al cerrar sesi\xF3n: ${e.message}`,"error",4e3)}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=S({type:r,selectors:[["app-lobby"]],decls:16,vars:9,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-purple-600","to-pink-500","text-white"],[1,"bg-white","bg-opacity-10","backdrop-blur-md","p-10","rounded-2xl","shadow-lg","w-full","max-w-md","relative"],[1,"absolute","flex","items-center","top-2","right-2","text-sm","bg-purple-600","text-white","font-semibold","px-3","py-1","rounded-full","shadow","hover:bg-purple-300","transition",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-6"],["stroke-linecap","round","stroke-linejoin","round","d","M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"],[1,"text-center","mb-6"],[1,"text-3xl","text-black","font-bold"],[1,"flex","justify-center","mb-4","space-x-2"],[1,"px-4","py-2","rounded-full","transition","font-semibold","w-1/2",3,"click","ngClass"],[1,"space-y-4",3,"formGroup"],[1,"space-y-4",3,"ngSubmit","formGroup"],["formControlName","roomId","name","createRoomId","type","text","placeholder","ID de la partida","required","",1,"w-full","px-4","py-2","rounded-lg","outline-2","text-purple-800","font-semibold","focus:ring-2","focus:ring-black"],[1,"text-red-400","text-sm","mt-0"],["type","submit",1,"w-full","px-4","py-2","bg-purple-500","text-white","font-bold","rounded-full","hover:bg-purple-300","transition"],["formControlName","roomId","name","joinRoomId","type","text","placeholder","ID de la partida","required","",1,"w-full","px-4","py-2","rounded-lg","outline-2","text-purple-800","font-semibold","focus:ring-2","focus:ring-black"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),s("click",function(){return o.logout()}),w(),i(3,"svg",3),b(4,"path",4),n(),a(5," Cerrar sesi\xF3n "),n(),F(),i(6,"div",5)(7,"h2",6),a(8,"Crea una partida o \xFAnete como invitado"),n()(),i(9,"div",7)(10,"button",8),s("click",function(){return o.activeTab="create"}),a(11," Crear Partida "),n(),i(12,"button",8),s("click",function(){return o.activeTab="join"}),a(13," Invitado "),n()(),p(14,O,5,2,"form",9)(15,K,5,2,"form",9),n()()),t&2&&(l(10),d("ngClass",C(3,B,o.activeTab==="create",o.activeTab!=="create")),l(2),d("ngClass",C(6,B,o.activeTab==="join",o.activeTab!=="join")),l(2),f(o.activeTab==="create"?14:o.activeTab==="join"?15:-1))},dependencies:[T,E,D,M,L,j,A,P,$,q,N],encapsulation:2})};export{H as Lobby};
